$(function(){function b(){var e=new y,t=e.getHand(),n=[];for(v=0;v<t.length;v++){if(v===0){n='<div class="card unknown"></div>';d=t[v].getCard()}else n=t[v].getCard();$(o).append(n)}return e}function w(){var e=new y,t=e.getHand();for(v=0;v<t.length;v++)$(s).append(t[v].getCard());x("Your hand is "+e.score()+", press Hit or Stand");return e}function E(e,t){var n="You got "+e.score(),r="dealer got "+t.score();return e.score()>21?t.score()>21?n+", "+r+". You tied!":n+", "+r+". You lose!":t.score()>21?n+", "+r+". You win!":e.score()>t.score()?n+", "+r+". You win!":e.score()===21?n+"! Blackjack!":e.score()===t.score()?n+", "+r+". You tied!":n+", "+r+". You lose!"}function S(){$(a).addClass("dis").off();$(f).addClass("dis").off()}function x(e){$(u).text(e)}function T(){S();$("#dealer .card:first-child").remove();$("#dealer").prepend(d);x(E(h,p));$(l).show()}function N(){h=w();p=b()}function C(){$(a).removeClass("dis").on();$(f).removeClass("dis").on();N();$(l).hide()}var e=["club","diamond","heart","spade"],t=["a",2,3,4,5,6,7,8,9,10,"j","q","k"],n=document.getElementById("loading"),r=document.getElementById("cover"),i=document.getElementById("game"),s=document.getElementById("player"),o=document.getElementById("dealer"),u=document.getElementById("msg"),a=document.getElementById("hit"),f=document.getElementById("stand"),l=document.getElementById("restart"),c,h,p,d,v=0,m=function(){var e=Math.floor(Math.random()*4),t=Math.floor(Math.random()*13);return new g(e,t)},g=function(n,r){var i=n,s=r,o=i===1||i===2?"red":"black";this.getNumber=function(){return s};this.getLetter=function(){return t[s]};this.getSuit=function(){return i};this.getValue=function(){return s===1?11:s>1&&s<10?s:10};this.getCard=function(){var n=[];n='<div class="card ';n+=e[i]+" "+o+" card-"+t[s];n+='" data-number="'+t[s]+'">';n+='<div class="cover"></div><div class="deck"></div>';n+="</div>";return n}},y=function(){var e=m(),t=m(),n=[e,t];this.getCard1=function(){return e};this.getCard2=function(){return t};this.getHand=function(){return n};this.score=function(){var e=0,t=0;for(v=0;v<n.length;v++){e+=n[v].getValue();e+=1;n[v].getValue()===11&&(t+=1)}while(t>0&&e>21){e-=10;t--}return e};this.hitMe=function(){var e=m();n.push(e);return e}},k=function(){r.style.visibility="visible";$("#logo").transition({x:"-50em"},0).transition({x:"0"},600,"in-out");$("#new-game").transition({x:"-50em"},0);$("#new-game").transition({x:"0"},600,"in-out");$("#logo").transition({perspective:"439px",rotateY:"0deg"}).transition({perspective:"439px",rotateY:"360deg"},600)},L=function(e){var t=1,n=e===undefined?"#player":e,r=[],i=$(n).find(".card"),s;$(i[0]).addClass("placed");s=setInterval(function(){$(i[t]).addClass("placed");t===i.length&&clearInterval(this);t++},400)},A=0,O=setInterval(function(){$("#loading .text .dots").append(".");if(A>2){$("#loading .text .dots").html("");A=0}else A++},180);setTimeout(function(){clearInterval(O);$(n).fadeOut();k()},1200);N();$("#new-game, #restart").on("click",function(e){e.preventDefault();$(r).hide();i.style.visibility="visible";$("#dealer .card").addClass("placed");L("#player");var t=$(s).children(),n=$(o).children();h.score()>=21&&T();$(a).live("click",function(e){var t,n,r;e.preventDefault();if(h.score()<21){n=h.hitMe();r=n.getCard();var i=$(r).appendTo(s);setTimeout(function(){i.addClass("placed")},10);if(p.score()<17){t=p.hitMe();r=t.getCard();var u=$(r).appendTo(o).addClass("placed")}h.score()>=21?T():x("Your hand is "+h.score()+", press Hit or Stand")}else T()});$(f).live("click",function(e){e.preventDefault();T()});$(l).live("click",function(e){e.preventDefault();$(".hand .card").remove();C();$("#dealer .card").addClass("placed");L("#player")})})});